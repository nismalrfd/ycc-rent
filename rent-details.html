<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rent Details</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
            padding: 15px;
        }
        .container {
            max-width: 600px;
            margin: 20px auto;
            background: #f7fbfe;
            padding: 30px 20px;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        h1 { color: #333; font-size: 24px; }
        .form-group { margin-bottom: 25px; }
        label {
            display: block; margin-bottom: 8px; color: #555;
            font-weight: 500; font-size: 14px;
        }
        input, select, textarea {
            width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0;
            border-radius: 6px; font-size: 15px; background: white;
            transition: border-color 0.3s;
        }
        input:focus, select:focus, textarea:focus {
            outline: none; border-color: #af0512;
        }
        .submit-btn {
            width: 100%; padding: 14px;
            background: linear-gradient(135deg, #af0512 0%, #f9090b 100%);
            color: white; border: none; border-radius: 6px;
            font-size: 16px; font-weight: 600; cursor: pointer;
        }
        .logout-btn {
            padding: 8px 16px; background: transparent; color: #af0512;
            border: 2px solid #af0512; border-radius: 6px;
            font-size: 13px; font-weight: 600; cursor: pointer;
        }
        .tab-buttons { text-align:center; margin-bottom:20px; }
        .tab-buttons button {
            padding:10px 20px; margin: 0 5px;
            border:2px solid #d20718;
            background:rgb(255, 255, 255); border-radius:6px; cursor:pointer;
            font-weight:600; color:#af0512;
        }
        .tab-buttons button.active { background:linear-gradient(135deg, #af0512 0%, #f9090b 100%); color:#f7fbfe; }

        /* --- Dropdown CSS --- */
        .dropdown-list {
            position: absolute;
            width: 100%;
            background: #fff;
            border: 1px solid #ccc;
            max-height: 180px;
            overflow-y: auto;
            display: none;
            z-index: 10;
        }
        .dropdown-list.show { display: block; }
        .dropdown-item {
            padding: 10px; cursor: pointer;
            border-bottom: 1px solid #eee;
        }
        .dropdown-item:hover { background: #b21b1b; }
        .search-dropdown { position: relative; }
    </style>
</head>
<body>

    <div class="tab-buttons">
        <button id="btnRent" class="active" onclick="showSection('rentSection', 'btnRent')">Rent Details</button>
        <button id="btnIncome" onclick="showSection('incomeSection', 'btnIncome')">Other Income</button>
        <button id="btnExpense" onclick="showSection('expenseSection', 'btnExpense')">Expenses</button>
    </div>

    <div class="container">
        <div class="header">
            <h1>YCC Entry</h1>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>

        <!-- RENT SECTION -->
        <div id="rentSection" class="formSection">
            <form id="rentForm">
                <div class="form-group">
                    <label>Name</label>
                    <div class="search-dropdown">
                        <input type="text" id="tenantSearch" placeholder="Search member…" autocomplete="off">
                        <div class="dropdown-list" id="tenantDropdown"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Payment Method</label>
                    <select id="paymentMethod" required>
                        <option value="">Select payment method</option>
                        <option value="UPI">UPI</option>
                        <option value="Cash">Cash</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Rent Amount</label>
                    <input type="number" id="Rentamount" required>
                </div>

                <button type="submit" class="submit-btn">Submit Rent</button>
            </form>
        </div>

        <!-- INCOME SECTION -->
        <div id="incomeSection" class="formSection" style="display:none;">
            <form id="incomeForm">
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" id="incomeName" required>
                </div>

                <div class="form-group">
                    <label>Amount</label>
                    <input type="number" id="incomeAmount" required>
                </div>

                <div class="form-group">
                    <label>Payment Method</label>
                    <select id="incomePayment" required>
                        <option value="">Select Mode</option>
                        <option>UPI</option>
                        <option>Cash</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Narration</label>
                    <textarea id="IncomeNarration" rows="3" required></textarea>
                </div>

                <button class="submit-btn" type="submit">Submit Income</button>
            </form>
        </div>

        <!-- EXPENSE SECTION -->
        <div id="expenseSection" class="formSection" style="display:none;">
            <form id="expenseForm">
                <div class="form-group">
                    <label>Category</label>
                    <div class="search-dropdown">
                        <input type="text" id="expenseCategory" placeholder="Search category…" autocomplete="off">
                        <div class="dropdown-list" id="categoryDropdown"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Amount</label>
                    <input type="number" id="expenseAmount" required>
                </div>

                <div class="form-group">
                    <label>Payment Method</label>
                    <select id="expensePayment" required>
                        <option value="">Select Mode</option>
                        <option>UPI</option>
                        <option>Cash</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Narration</label>
                    <textarea id="expenseNarration" rows="3" required></textarea>
                </div>

                <button class="submit-btn" type="submit">Submit Expense</button>
            </form>
        </div>

    </div>

<script>
    /* ------- LOGIN CHECK ------- */
    if (!sessionStorage.getItem('isLoggedIn')) {
        window.location.href = 'index.html';
    }

    function showSection(sectionId, btnId) {
        document.querySelectorAll('.formSection').forEach(s => s.style.display = 'none');
        document.getElementById(sectionId).style.display = 'block';

        document.querySelectorAll('.tab-buttons button').forEach(b => b.classList.remove('active'));
        document.getElementById(btnId).classList.add('active');
    }

    const GOOGLE_WEB_APP_URL =
     "https://script.google.com/macros/s/AKfycbyuWh4OHOqL3D_QHmLWvcVB6LJ3gvUUMwL0TmWWVGp7pri3FtzZRo-xcV9P0xS1Khzf/exec";

    /* ---------- TENANT DROPDOWN ---------- */
   const tenants = [
    "MUSFIR AREEKAN",
    "NISMAL",
    "SHAHEEN",
    "FARHAN",
    "MUSHTHAQ",
    "ASHIQ AKKU",
    "ASHiq",
    "ANSHIQ",
    "ARSHAD",
    "ASIF",
    "SABITH",
    "FAHIS",
    "NIYAS",
    "SHABEEB PARAKKAL",
    "FAYAS",
    "MURSHID",
    "AMALRAJ",
    "NASAR K",
    "JOUHAR",
    "SHAFIN",
    "MUBASHIR",
    "JASEEL",
    "SINAN PP",
    "SHAMIL",
    "SINAN P",
    "SHIBILI",
    "HAQ",
    "SINAN KK",
    "YASEEN",
    "MUFEED",
    "INSHAD RAHMAN",
    "Nisam -",
    "Sakeer",
    "Nasar",
    "Aflah",
    "Afi",
    "Mashood",
    "Ummar",
    "Muhfir",
    "Shafeeq ab",
    "Amjad",
    "Asif thattan",
    "Shalu",
    "Jaseem",
    "Ismail",
    "Hashim",
    "Kabeer"
];


    const tenantSearch = document.getElementById("tenantSearch");
    const tenantDropdown = document.getElementById("tenantDropdown");

    function showTenantList() {
        tenantDropdown.innerHTML = "";
        tenants.forEach(name => {
            let item = document.createElement("div");
            item.className = "dropdown-item";
            item.textContent = name;
            item.onclick = () => {
                tenantSearch.value = name;
                tenantDropdown.classList.remove("show");
            };
            tenantDropdown.appendChild(item);
        });
    }

    tenantSearch.addEventListener("focus", () => {
        showTenantList();
        tenantDropdown.classList.add("show");
    });

    tenantSearch.addEventListener("input", () => {
        let term = tenantSearch.value.toLowerCase();
        [...tenantDropdown.children].forEach(item => {
            item.style.display = item.textContent.toLowerCase().includes(term) ? "block" : "none";
        });
    });

    document.addEventListener("click", (e) => {
        if (!tenantSearch.contains(e.target)) tenantDropdown.classList.remove("show");
    });

    /* ---------- CATEGORY DROPDOWN ---------- */
    const categories = [
        "Electricity",
        "TV Bill",
        "Maintenance",
        "Repairs",
        "Cleaning",
        "Printing",
        "Stationery",
        "Miscellaneous"
    ];

    const expenseCategory = document.getElementById("expenseCategory");
    const categoryDropdown = document.getElementById("categoryDropdown");

    function showCategoryList() {
        categoryDropdown.innerHTML = "";
        categories.forEach(cat => {
            let item = document.createElement("div");
            item.className = "dropdown-item";
            item.textContent = cat;
            item.onclick = () => {
                expenseCategory.value = cat;
                categoryDropdown.classList.remove("show");
            };
            categoryDropdown.appendChild(item);
        });
    }

    expenseCategory.addEventListener("focus", () => {
        showCategoryList();
        categoryDropdown.classList.add("show");
    });

    expenseCategory.addEventListener("input", () => {
        let term = expenseCategory.value.toLowerCase();
        [...categoryDropdown.children].forEach(item => {
            item.style.display = item.textContent.toLowerCase().includes(term) ? "block" : "none";
        });
    });

    document.addEventListener("click", (e) => {
        if (!expenseCategory.contains(e.target)) categoryDropdown.classList.remove("show");
    });

    /* ---------- FORM SUBMIT HANDLERS ---------- */
    document.getElementById("rentForm").addEventListener("submit", function(e){
        e.preventDefault();
        sendToGoogle({
            type: "rent",
            tenant: tenantSearch.value,
            paymentMethod: document.getElementById("paymentMethod").value,
            rentAmount: document.getElementById("Rentamount").value
        });
    });

    document.getElementById("incomeForm").addEventListener("submit", function(e){
        e.preventDefault();
        sendToGoogle({
            type: "income",
            name: document.getElementById("incomeName").value,
            amount: document.getElementById("incomeAmount").value,
            paymentMethod: document.getElementById("incomePayment").value,
            narration: document.getElementById("IncomeNarration").value
        });
    });

    document.getElementById("expenseForm").addEventListener("submit", function(e){
        e.preventDefault();
        sendToGoogle({
            type: "expense",
            category: document.getElementById("expenseCategory").value,
            amount: document.getElementById("expenseAmount").value,
            paymentMethod: document.getElementById("expensePayment").value,
            narration: document.getElementById("expenseNarration").value
        });
    });

    function sendToGoogle(payload) {
        fetch(GOOGLE_WEB_APP_URL, {
            method: "POST",
            body: JSON.stringify(payload),
            headers: { "Content-Type": "text/plain" }
        })
        .then(r => r.text())
        .then(alert)
        .catch(console.error);
    }

    function logout() {
        sessionStorage.removeItem('isLoggedIn');
        window.location.href = 'index.html';
    }
</script>

</body>
</html>

